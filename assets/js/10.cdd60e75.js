(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{356:function(s,a,e){"use strict";e.r(a);var t=e(42),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"项目中的-git-message-规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目中的-git-message-规范"}},[s._v("#")]),s._v(" 项目中的 git message 规范")]),s._v(" "),e("p",[s._v("Git 每次提交代码，都要写 Commit message 来说明本次的提交内容。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello word"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("当提交的内容比较多的时候， 可以执行 "),e("code",[s._v("git commit")]),s._v(", 使用跳出来的文本来编辑提交信息。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在项目开发过程中， 使用 git commit 提交的信息可以很好的反应项目的开发进展情况。 所以应当规范 git message 的格式， 来更加清晰明了的说明每次的提交目的。")]),s._v(" "),e("p",[e("img",{attrs:{src:"http://ww2.sinaimg.cn/large/006tNc79gy1g5wzm53crej31900egjt5.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"angular-commit-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#angular-commit-message"}},[s._v("#")]),s._v(" Angular Commit message")]),s._v(" "),e("p",[s._v("关于 Git message 的写法规范社区中有很多种， 目前使用较为广泛的是 "),e("a",{attrs:{href:"https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#heading=h.greljkmo14y0",target:"_blank",rel:"noopener noreferrer"}},[s._v("Angular 规范"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("Angular")]),s._v(" 规范中， 每次提交， Commit message  都包括三个部分： Header、Body 和 Footer;")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("scope"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("subject"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## header 部分")]),s._v("\n// 空一行\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("body"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## body  部分")]),s._v("\n// 空一行\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("footer"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## footer 部分")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("ol",[e("li",[s._v("这三个部分种， Header 是必须的， Body 和 Footer 可以省略。")]),s._v(" "),e("li",[s._v("不管哪个部分，为了在输出 log 时的美观，任何一行的都不得超过 72 个字符。")])])]),s._v(" "),e("h3",{attrs:{id:"header-部分"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#header-部分"}},[s._v("#")]),s._v(" Header 部分")]),s._v(" "),e("p",[s._v("Header 部分只有一行， 包括三个字段： "),e("code",[s._v("type")]),s._v("(必须)、"),e("code",[s._v("scope")]),s._v("(可选)、"),e("code",[s._v("subject")]),s._v("(必须);")]),s._v(" "),e("h4",{attrs:{id:"type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[s._v("#")]),s._v(" type")]),s._v(" "),e("p",[e("code",[s._v("type")]),s._v(" 用于说明 commit 的类型， 在 "),e("code",[s._v("Angular 规范")]),s._v(" 种， 只允许 7 种常用类型和一种特殊类型(revert):")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("feat: 新功能 (feature)\nfix: 修补 bug\ndocs: 文档 (ocumentation)\nstyle: 格式 (不影响代码运行)\nrefactory: 重构 (既不是新增功能， 也不是修改 bug 的代码改动)\ntest: 增加测试\nchore: 构建过程或辅助工具的变动\nrevert: 撤销以前的 commit； header 部分需要跟被撤销 Commit 的 Header \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h4",{attrs:{id:"scope"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope"}},[s._v("#")]),s._v(" scope")]),s._v(" "),e("p",[e("code",[s._v("scope")]),s._v(" 用于说明 "),e("code",[s._v("commit")]),s._v(" 影响的范围， 比如说数据层、控制层、视图层等等")]),s._v(" "),e("h4",{attrs:{id:"subject"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subject"}},[s._v("#")]),s._v(" subject")]),s._v(" "),e("p",[e("code",[s._v("subject")]),s._v(" 是 "),e("code",[s._v("commit")]),s._v(" 的简短描述， 不超过 50 个字符。")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("以动词开头， 使用第一人称现在时， 比如 "),e("code",[s._v("change")]),s._v(" 而不是 "),e("code",[s._v("changed")]),s._v(" 或者 "),e("code",[s._v("changes")]),s._v("\n第一个字母小写\n结尾不加句号")])]),s._v(" "),e("h4",{attrs:{id:"body"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#body"}},[s._v("#")]),s._v(" body")]),s._v(" "),e("p",[e("code",[s._v("body")]),s._v(" 部分是对本次 "),e("code",[s._v("commit")]),s._v(" 的详细描述， 可以分为多行。")]),s._v(" "),e("h4",{attrs:{id:"footer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#footer"}},[s._v("#")]),s._v(" footer")]),s._v(" "),e("p",[s._v("在很多情况下， 是不使用这部分的内容的， 但是在下面两种情况下，回使用到 "),e("code",[s._v("footer")])]),s._v(" "),e("ol",[e("li",[s._v("不兼容变动说明\n如果当前代码与上一个版本不兼容， 则 "),e("code",[s._v("footer")]),s._v(" 部分需要使用 "),e("code",[s._v("BREAKING CHANGE")]),s._v(" 开头， 后面是对变动的描述以及变动理由和变动方法.")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("BREAKING CHANGE: isolate scope bindings definition has changed.\n\n    To migrate the code follow the example below:\n\n    Before:\n\n    scope: {\n      myAttr: 'attribute',\n    }\n\n    After:\n\n    scope: {\n      myAttr: '@',\n    }\n\n    The removed `inject` wasn't generaly useful for directives so there should be no code using it.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("关闭 Issue\n如果当前 commit 是针对 某个或者某几个 "),e("code",[s._v("issue")]),s._v(", 那个可以在 footer 部分关闭 "),e("code",[s._v("issue")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Closes #123\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("关闭多个 issue")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Closes #123, #234, #345\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"commitizen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commitizen"}},[s._v("#")]),s._v(" Commitizen")]),s._v(" "),e("p",[s._v("在项目的开发过程中，编程人员遵守 "),e("code",[s._v("Angular 规范")]),s._v(" 需要编写更多的 git message 信息, 使用 "),e("a",{attrs:{href:"https://github.com/commitizen/cz-cli",target:"_blank",rel:"noopener noreferrer"}},[s._v("Commitizen"),e("OutboundLink")],1),s._v(" 来进行交互式的 message 输入。")]),s._v(" "),e("ul",[e("li",[s._v("安装")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g commitizen\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or yarn")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" global "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" commitizen\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("然后，在项目目录里，运行下面的命令，使其支持 Angular 的 Commit message 格式。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("commitizen init cz-conventional-changelog --save --save-exact\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or yarn ")]),s._v("\ncommitizen init cz-conventional-changelog --yarn --dev --exact\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("当需要 "),e("code",[s._v("git commit")]),s._v(" 的时候使用 "),e("code",[s._v("git cz")]),s._v(" 来生成符合规范的 git message.\n"),e("img",{attrs:{src:"http://ww1.sinaimg.cn/large/006tNc79gy1g5wzn2zg44j30tx08b74z.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"commitlint-校验-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commitlint-校验-message"}},[s._v("#")]),s._v(" commitlint 校验 message")]),s._v(" "),e("p",[e("code",[s._v("git cz")]),s._v("  命令为 git message 提供了一个规范的 message 模板， 这时使用 "),e("code",[s._v("git commit -m")]),s._v(" 或者 使用 "),e("code",[s._v("git cz")]),s._v(" 依旧不能严格限制 git message 内容， 为了严格规范需要使用 "),e("a",{attrs:{href:"https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional",target:"_blank",rel:"noopener noreferrer"}},[s._v("commitlint"),e("OutboundLink")],1),s._v(" 来拒绝不规范的 git message 内容。")]),s._v(" "),e("ul",[e("li",[s._v("安装")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev @commitlint/config-conventional @commitlint/cli\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or yarn ")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -D @commitlint/config-conventional @commitlint/cli\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ul",[e("li",[s._v("添加配置文件 (为了使 commitlint 生效)")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"module.exports = {extends: ['@commitlint/config-conventional']};\"")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" commitlint.config.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("或者在 "),e("code",[s._v("package.json")]),s._v(" 文件中添加")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"commitlint": {\n    extnds: [\n        "@commitlint/config-conventional"\n    ]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"触发-commitlint"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#触发-commitlint"}},[s._v("#")]),s._v(" 触发 commitlint")]),s._v(" "),e("p",[s._v("配置好 "),e("code",[s._v("commitlint")]),s._v(", 还需要设置 触发 "),e("code",[s._v("commitlint")]),s._v(" 的时机。")]),s._v(" "),e("p",[e("code",[s._v("Git")]),s._v(" 中自带不同的 "),e("code",[s._v("hook")]),s._v("， 当某些事件发生的时候，会触发相对应的 "),e("code",[s._v("hook")]),s._v(", 这些 "),e("code",[s._v("hook")]),s._v(" 脚本存放在项目根目录的 "),e("code",[s._v(".git/hooks")]),s._v(" 目录下。")]),s._v(" "),e("p",[e("code",[s._v("commit-msg")]),s._v(" 是其中一个 "),e("code",[s._v("hook")]),s._v(", 在 "),e("code",[s._v("git commit")]),s._v(" 提交的时候触发。 可以使用 "),e("a",{attrs:{href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"}},[s._v("husky"),e("OutboundLink")],1),s._v(" 或者 "),e("a",{attrs:{href:"https://www.npmjs.com/package/yorkie",target:"_blank",rel:"noopener noreferrer"}},[s._v("yorkie"),e("OutboundLink")],1),s._v(" 来自定义 "),e("code",[s._v("commit-msg")]),s._v(" 触发时候的事件。")]),s._v(" "),e("h3",{attrs:{id:"选择一-husky"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选择一-husky"}},[s._v("#")]),s._v(" 选择一: husky")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("安装\n"),e("code",[s._v("npm install husky -D")])])]),s._v(" "),e("li",[e("p",[s._v("在 "),e("code",[s._v("package.json")]),s._v(" 中添加代码")])])]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"husky"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ghooks"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commit-msg"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commitlint -e $GIT_PARAMS"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"选择二-yorkie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选择二-yorkie"}},[s._v("#")]),s._v(" 选择二: yorkie")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("安装 yorkie\n"),e("code",[s._v("npm install yorkie -D")])])]),s._v(" "),e("li",[e("p",[s._v("在 "),e("code",[s._v("package.json")]),s._v(" 中添加代码")])])]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[s._v("  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"gitHooks"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commit-msg"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commitlint -e $GIT_PARAMS"')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("blockquote",[e("p",[s._v("在 "),e("code",[s._v("git commit-msg")]),s._v(" 这个钩子中会触发 "),e("code",[s._v("commitlint")]),s._v(" 的操作。")])]),s._v(" "),e("h2",{attrs:{id:"配合-lint-staged-进行代码检验和修复"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配合-lint-staged-进行代码检验和修复"}},[s._v("#")]),s._v(" 配合 lint-staged 进行代码检验和修复")]),s._v(" "),e("p",[s._v("在完成了 "),e("code",[s._v("git message")]),s._v(" 的校验之后， 可以继续使用 "),e("a",{attrs:{href:"https://github.com/okonet/lint-staged",target:"_blank",rel:"noopener noreferrer"}},[s._v("lint-staged"),e("OutboundLink")],1),s._v(" 和 "),e("code",[s._v("git hooks")]),s._v(" 来进行代码提交前的语法、风格的验证和修复。")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("安装\n"),e("code",[s._v("npm install -D lint-staged")])])]),s._v(" "),e("li",[e("p",[s._v("在跟目录下创建 "),e("code",[s._v(".lintstagedrc")]),s._v(", 并写入")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n    "*.{js,vue}": ["eslint --fix", "git add"]\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ul",[e("li",[s._v("或者在 "),e("code",[s._v("package.json")]),s._v(" 中写入")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"lint-staged": {\n    "*.{js,vue}": ["eslint --fix", "git add"]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("在 "),e("code",[s._v("husky")]),s._v(" 或者 "),e("code",[s._v("yorkie")]),s._v(" 配置中添加触发时机")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('// husky 配置方式\n"husky": {\n  "hooks": {\n    "pre-commit": "lint-staged",\n    "commit-msg": "commitlint -e $GIT_PARAMS"\n  }\n}\n\n// yorkie 配置方式\n "gitHooks": {\n    "pre-commit": "lint-staged",\n    "commit-msg": "commitlint -e $GIT_PARAMS"\n  }\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("这样在每次提交之前都会触发 "),e("code",[s._v("pre-commit")]),s._v(" 这个 "),e("code",[s._v("hook")]),s._v(", 从而触发 "),e("code",[s._v(".lintstagedrc")]),s._v(" 或者 "),e("code",[s._v("package.json")]),s._v(" 中的 "),e("code",[s._v("lint-staged")]),s._v(" 里面的配置。 在例子中，我们配置了对所有 "),e("code",[s._v(".js")]),s._v(" 或者 "),e("code",[s._v(".vue")]),s._v(" 结尾的文件进行 "),e("code",[s._v("eslint")]),s._v(" 的修复， 并且当修复之后再次执行 "),e("code",[s._v("git add")]),s._v(" 将修改后的文件再次放到暂存区。 这样就可以保证每次提交的代码都是统一风格的代码了。")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[e("code",[s._v("lint-staged")]),s._v(" 只对此次提交所在暂存区的文件（git add后的文件）进行一系列的检查、修复、格式化操等作。")])]),s._v(" "),e("h2",{attrs:{id:"自动生成-change-log-并更新-version"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自动生成-change-log-并更新-version"}},[s._v("#")]),s._v(" 自动生成 Change log 并更新 Version")]),s._v(" "),e("p",[s._v("当使用 "),e("code",[s._v("Angular 规范")]),s._v(" 提交 "),e("code",[s._v("git message")]),s._v(", 还可以使用 "),e("a",{attrs:{href:"https://github.com/conventional-changelog/standard-version",target:"_blank",rel:"noopener noreferrer"}},[s._v("standard-version"),e("OutboundLink")],1),s._v("生成 "),e("code",[s._v("Change log")]),s._v(" 文档。\n生成的文档将会包括下面三个部分。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("new features   // 新增功能记录\nbug fixes   // 解决 bug 记录 \nbreaking changes   // 不兼容变动记录\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("每一部分都会列出相关的 "),e("code",[s._v("commit")]),s._v(", 并且指向这些 "),e("code",[s._v("commit")]),s._v(" 的连接。 "),e("code",[s._v("conventional-changelog")]),s._v(" 使用如下：")]),s._v(" "),e("ol",[e("li",[s._v("安装")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install -g standard-version\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("在 "),e("code",[s._v("package.json")]),s._v(" 中添加 "),e("code",[s._v("script")]),s._v(" 字段")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"script": {\n  "release": "standard-version"\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("运行 "),e("code",[s._v("npm run release")]),s._v(" 将会执行下面的步骤。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1. 修改 package.json package-lock.json 中的版本号\n2. 生成 CHANGELOG.md 文件。 \n3. 提交  package.json package-lock.json CHANGELOG.md 文件\n4. 给本次提交打上 tag\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("img",{attrs:{src:"http://ww3.sinaimg.cn/large/006tNc79gy1g5wzem0mk4j30w00gy778.jpg",alt:""}})]),s._v(" "),e("p",[s._v("更多 "),e("code",[s._v("stardard-version")]),s._v(" 请参考 "),e("a",{attrs:{href:"/npm/standard-version"}},[s._v("stardard-version")])])])}),[],!1,null,null,null);a.default=n.exports}}]);