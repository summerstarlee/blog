(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{409:function(s,a,e){"use strict";e.r(a);var t=e(42),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"使用-ssh-config-快速登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-ssh-config-快速登录"}},[s._v("#")]),s._v(" 使用 ssh-config 快速登录")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@172.0.0.1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("为了避免每次登录服务器时都输入服务器的IP地址， 可以使用 ssh-config 配置服务器别名， 更方面的登陆服务器。")]),s._v(" "),e("h2",{attrs:{id:"步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[s._v("#")]),s._v(" 步骤")]),s._v(" "),e("ol",[e("li",[s._v("在本地客户端环境上配置 ssh-config 文件。 进入当前用户的主目录下的 ssh 目录 ("),e("code",[s._v("~/.ssh/")]),s._v(") 添加服务器别名。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("Host server_name  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要添加的服务器别名")]),s._v("\n  HostName  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.0")]),s._v(".0.1  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务器 IP 地址")]),s._v("\n  User root  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录用户名")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("使用 "),e("code",[s._v("ssh serve_name")]),s._v(" 快速登陆。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ssh server_name\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("如果出现 "),e("code",[s._v("The authenticity of host '59.110.216.155 (59.110.216.155)' can't be established. ... Are you sure you want to continue connecting (yes/no)? yes")]),s._v(" 提示， 输入 "),e("code",[s._v("yes")]),s._v(" 即可。")])]),s._v(" "),e("h1",{attrs:{id:"免密码登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#免密码登录"}},[s._v("#")]),s._v(" 免密码登录")]),s._v(" "),e("p",[s._v("公钥和私钥是成对出现的, "),e("strong",[s._v("公钥用于加密， 私钥用于解密, 私钥用于数字签名，公钥用于验证")])]),s._v(" "),e("p",[s._v("当使用 ssh 密码登录时， 流程是这样的：")]),s._v(" "),e("ol",[e("li",[s._v("远程主机收到用户的登陆请求， 把自己的公钥发给用户。")]),s._v(" "),e("li",[s._v("用户使用这个公钥将密码加密后发给远程主机。")]),s._v(" "),e("li",[s._v("远程主机使用自己的私钥解密登录密码，如果密码正确就同意用户登录。")])]),s._v(" "),e("p",[s._v("密码登录使用到的公私钥来自于服务端。 免密码登录的原理就是使用本地的公私钥加解密，他的过程是这样的：")]),s._v(" "),e("ol",[e("li",[s._v("用户先将自己的公钥储存在远程主机上。")]),s._v(" "),e("li",[s._v("登陆时，远程主机发送一段随机的字符串给用户。")]),s._v(" "),e("li",[s._v("用户使用自己的私钥加密（签名）这段字符串发给主机。")]),s._v(" "),e("li",[s._v("主机使用事先储存的公钥进行解密(验证)，如果成功允许登录，否则登陆失败。")])]),s._v(" "),e("p",[s._v("步骤：")]),s._v(" "),e("ol",[e("li",[s._v("查看本地是否有公钥私钥存在。目录在 "),e("code",[s._v("~/.ssh/")]),s._v("。 如果没有使使用 "),e("code",[s._v("ssh-keygen")]),s._v(" 命令生成(一路回车即可)。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("ssh-keygen\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("将公钥推送到远程主机")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("ssh-copy-id user@host   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户名@主机IP")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("确定远程 "),e("code",[s._v("/etc/ssh/sshd_config")]),s._v(' 文件中配置。检查下面几行前面"#"注释是否取掉。')])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("RSAAuthentication "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nPubkeyAuthentication "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nAuthorizedKeysFile .ssh/authorized_keys\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("重启远程主机的 "),e("code",[s._v("ssh")])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# centOS")]),s._v("\nsystemctl  restart  ssh.service\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ubuntu")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" restart\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);